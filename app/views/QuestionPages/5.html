#{extends 'layout.html' /}
#{set title:'Adding a new service' /}

%{
  def page = 'p5'
  def question = page + 'q1'
  def questionIsRelevantToSelectedLot = false
}%

#{breadcrumb-one-deep
  service_name: serviceName,
  lot: lot
/}

<form action='${request.getBase()}${request.url}' method='POST'>
  #{heading
    current: pageNum,
    total: pageTotal,
    title: content.get('p5title')
  /}
  %{
    questionIsRelevantToSelectedLot = content.get(question + 'lots').contains(lot)
    if (questionIsRelevantToSelectedLot) {
  }%
  <fieldset class='input-list'>
    #{question-heading
      heading: content.get(question + 'text'),
      hint: content.get(question + 'hint'),
      error: content.get(question + flash.get(question))
    /}
    %{
      for (index in 1..10) {
    }%
      #{forms/textbox-input-list-item
        name: 'p5q1val' + index,
        numbered: index,
        value: oldValues?.get('p5q1val' + index)
      /}
    %{
      }
    }%
    #{question-footer
      error: content.get(question + flash.get(question))
    /}
  </fieldset>
  %{
    }
    question = page + 'q2'

    questionIsRelevantToSelectedLot = content.get(question + 'lots').contains(lot)
    if (questionIsRelevantToSelectedLot) {
  }%
  <fieldset class='input-list'>
    #{question-heading
      heading: content.get(question + 'text'),
      hint: content.get(question + 'hint'),
      error: content.get(question + flash.get(question))
    /}
    %{
      for (index in 1..10) {
    }%
      #{forms/textbox-input-list-item
        name: question + 'val' + index,
        numbered: index,
        value: oldValues?.get(question + 'val' + index)
      /}
    %{
      }
    }%
    #{question-footer
      error: content.get(question + flash.get(question))
    /}
  </fieldset>
  %{
    }
  }%
  #{footer/}
</form>
